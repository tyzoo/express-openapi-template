{
	"components": {
		"examples": {},
		"headers": {},
		"parameters": {},
		"requestBodies": {},
		"responses": {},
		"schemas": {
			"Scopes": {
				"enum": [
					"admin",
					"user",
					"banned",
					"verified"
				],
				"type": "string"
			},
			"User": {
				"properties": {
					"createdAt": {
						"type": "string",
						"format": "date-time"
					},
					"updatedAt": {
						"type": "string",
						"format": "date-time"
					},
					"address": {
						"type": "string"
					},
					"nonce": {
						"type": "string"
					},
					"scopes": {
						"items": {
							"$ref": "#/components/schemas/Scopes"
						},
						"type": "array",
						"description": "Privleged access to API's and other account flags",
						"example": [
							"user",
							"banned",
							"verified",
							"admin"
						]
					},
					"jwt": {
						"type": "string",
						"description": "Store latest JWT for authorizaiton"
					}
				},
				"required": [
					"address"
				],
				"type": "object",
				"additionalProperties": false
			},
			"Item": {
				"properties": {
					"name": {
						"type": "string"
					},
					"rng": {
						"type": "number",
						"format": "double"
					}
				},
				"required": [
					"name"
				],
				"type": "object",
				"additionalProperties": false
			},
			"mongoose.Types.ObjectId": {
				"type": "string"
			},
			"Record_string.any_": {
				"properties": {},
				"type": "object",
				"description": "Construct a type with a set of properties K of type T"
			},
			"Metadata": {
				"properties": {
					"signer": {
						"type": "string"
					},
					"realm": {
						"properties": {
							"lighthouseVersion": {
								"type": "string"
							},
							"layer": {
								"type": "string"
							},
							"catalystName": {
								"type": "string"
							},
							"domain": {
								"type": "string"
							}
						},
						"type": "object"
					},
					"isGuest": {
						"type": "boolean"
					},
					"network": {
						"type": "string"
					},
					"tld": {
						"type": "string"
					},
					"parcel": {
						"type": "string"
					},
					"sceneId": {
						"type": "string"
					},
					"origin": {
						"type": "string"
					}
				},
				"required": [
					"signer",
					"realm"
				],
				"type": "object"
			},
			"RateLimitResponse": {
				"properties": {
					"ok": {
						"type": "boolean",
						"description": "Status",
						"example": true
					},
					"message": {
						"type": "string",
						"description": "Status message",
						"example": "This request is allowed!"
					},
					"requests": {
						"type": "number",
						"format": "double",
						"description": "Number of requests",
						"example": 1
					},
					"ttl": {
						"type": "number",
						"format": "double",
						"description": "Time To Live, the interval in seconds after which a key-value pair of cache elements will be evicted from the cache.",
						"example": 10
					}
				},
				"required": [
					"ok",
					"message",
					"requests",
					"ttl"
				],
				"type": "object",
				"additionalProperties": false
			}
		},
		"securitySchemes": {
			"api_key": {
				"type": "apiKey",
				"name": "access_token",
				"in": "query"
			},
			"jwt": {
				"type": "apiKey",
				"name": "authorization",
				"in": "header",
				"scopes": {
					"admin:all": "admin rights to all resources"
				}
			},
			"tsoa_auth": {
				"type": "oauth2",
				"flows": {
					"implicit": {
						"authorizationUrl": "http://swagger.io/api/oauth/dialog",
						"scopes": {
							"write:pets": "modify things",
							"read:pets": "read things"
						}
					}
				}
			}
		}
	},
	"info": {
		"title": "Example API",
		"version": "2.0.0",
		"description": "An example node app using OpenAPI - Express - Typescript. [Sign In With Ethereum](./../auth)",
		"license": {
			"name": "ISC"
		},
		"contact": {
			"name": "@tyzoo",
			"url": "https://github.com/tyzoo",
			"email": "tyler.russell.design@gmail.com"
		}
	},
	"openapi": "3.0.0",
	"paths": {
		"/auth/nonce": {
			"post": {
				"operationId": "Nonce",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"properties": {
										"nonce": {
											"type": "string"
										}
									},
									"required": [
										"nonce"
									],
									"type": "object"
								},
								"examples": {
									"Successful Response": {
										"value": {
											"nonce": "MQ4YUxu1R1WUqwerty"
										}
									}
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": {
								"schema": {
									"properties": {
										"message": {
											"type": "string"
										}
									},
									"required": [
										"message"
									],
									"type": "object"
								},
								"examples": {
									"Example 1": {
										"value": {
											"message": "Unauthorized request"
										}
									}
								}
							}
						}
					}
				},
				"description": "Get a nonce for a user",
				"summary": "Get a new nonce",
				"tags": [
					"Authentication"
				],
				"security": [],
				"parameters": [],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"properties": {
									"address": {
										"type": "string"
									}
								},
								"required": [
									"address"
								],
								"type": "object"
							}
						}
					}
				}
			}
		},
		"/auth/siwe-payload": {
			"post": {
				"operationId": "GetSiweMessage",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"properties": {
										"message": {
											"type": "string"
										}
									},
									"required": [
										"message"
									],
									"type": "object"
								},
								"examples": {
									"Successful Response": {
										"value": {
											"message": "express-openapi-ts-app.herokuapp.com wants you to sign in with your Ethereum account:\n0x12345...\n\nSign in with Ethereum to the app.\n\nURI: https://express-openapi-ts-app.herokuapp.com\nVersion: 1\nChain ID: 1\nNonce: MQ4YUxu1R1WUqwerty\nIssued At: 2023-03-15T02:28:43.469Z"
										}
									}
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": {
								"schema": {
									"properties": {
										"message": {
											"type": "string"
										}
									},
									"required": [
										"message"
									],
									"type": "object"
								},
								"examples": {
									"Example 1": {
										"value": {
											"message": "Unauthorized request"
										}
									}
								}
							}
						}
					}
				},
				"description": "Get a SIWE Payload for an address/nonce",
				"summary": "Get a SIWE Payload",
				"tags": [
					"Authentication"
				],
				"security": [],
				"parameters": [],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"properties": {
									"nonce": {
										"type": "string"
									},
									"address": {
										"type": "string"
									}
								},
								"required": [
									"nonce",
									"address"
								],
								"type": "object"
							}
						}
					}
				}
			}
		},
		"/auth/login": {
			"post": {
				"operationId": "Login",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"properties": {
										"success": {
											"type": "boolean"
										}
									},
									"required": [
										"success"
									],
									"type": "object"
								},
								"examples": {
									"Successful Response": {
										"value": {
											"success": true
										}
									}
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": {
								"schema": {
									"properties": {
										"message": {
											"type": "string"
										}
									},
									"required": [
										"message"
									],
									"type": "object"
								},
								"examples": {
									"Example 1": {
										"value": {
											"message": "Unauthorized request"
										}
									}
								}
							}
						}
					}
				},
				"description": "Login with SIWE",
				"summary": "Login with SIWE",
				"tags": [
					"Authentication"
				],
				"security": [],
				"parameters": [],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"properties": {
									"siwe": {
										"properties": {
											"payload": {
												"type": "string"
											},
											"signature": {
												"type": "string"
											},
											"address": {
												"type": "string"
											}
										},
										"required": [
											"payload",
											"signature",
											"address"
										],
										"type": "object"
									}
								},
								"required": [
									"siwe"
								],
								"type": "object"
							}
						}
					}
				}
			}
		},
		"/auth/logout": {
			"get": {
				"operationId": "Logout",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"properties": {
										"success": {
											"type": "boolean"
										}
									},
									"required": [
										"success"
									],
									"type": "object"
								},
								"examples": {
									"Successful Response": {
										"value": {
											"success": true
										}
									}
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": {
								"schema": {
									"properties": {
										"message": {
											"type": "string"
										}
									},
									"required": [
										"message"
									],
									"type": "object"
								},
								"examples": {
									"Example 1": {
										"value": {
											"message": "Unauthorized request"
										}
									}
								}
							}
						}
					}
				},
				"description": "Logout from SIWE",
				"summary": "Logout from SIWE",
				"tags": [
					"Authentication"
				],
				"security": [],
				"parameters": []
			}
		},
		"/auth/profile": {
			"get": {
				"operationId": "Profile",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"properties": {
										"jwt": {
											"type": "string"
										},
										"user": {
											"allOf": [
												{
													"$ref": "#/components/schemas/User"
												},
												{
													"properties": {
														"_id": {
															"type": "string"
														}
													},
													"required": [
														"_id"
													],
													"type": "object"
												}
											],
											"nullable": true
										}
									},
									"required": [
										"user"
									],
									"type": "object"
								},
								"examples": {
									"Successful Response": {
										"value": {
											"user": {
												"_id": "632a1ed547dcfbc73c912345",
												"address": "0x3C815A79f52A07AD30a8Ad299F68D0C328E12345",
												"nonce": "ItiFRj6T1rQaqwerty",
												"updatedAt": "2023-03-15T01:29:47.938Z"
											},
											"jwt": "eyfrgGciJ..."
										}
									}
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": {
								"schema": {
									"properties": {
										"message": {
											"type": "string"
										}
									},
									"required": [
										"message"
									],
									"type": "object"
								},
								"examples": {
									"Example 1": {
										"value": {
											"message": "Unauthorized request"
										}
									}
								}
							}
						}
					}
				},
				"description": "Get SIWE Profile",
				"summary": "Get SIWE Profile",
				"tags": [
					"Authentication"
				],
				"security": [],
				"parameters": []
			}
		},
		"/captcha/new": {
			"get": {
				"operationId": "NewCaptcha",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"type": "number",
									"enum": [
										null
									],
									"nullable": true
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": {
								"schema": {
									"properties": {
										"message": {
											"type": "string"
										}
									},
									"required": [
										"message"
									],
									"type": "object"
								},
								"examples": {
									"Example 1": {
										"value": {
											"message": "Unauthorized request"
										}
									}
								}
							}
						}
					}
				},
				"description": "Generate a new Captcha",
				"summary": "Generate a new Captcha",
				"tags": [
					"Authentication"
				],
				"security": [],
				"parameters": []
			}
		},
		"/captcha/verify": {
			"post": {
				"operationId": "GetSiweMessage",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"properties": {
										"success": {
											"type": "boolean"
										}
									},
									"required": [
										"success"
									],
									"type": "object"
								},
								"examples": {
									"Successful Response": {
										"value": {
											"success": true
										}
									}
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": {
								"schema": {
									"properties": {
										"message": {
											"type": "string"
										}
									},
									"required": [
										"message"
									],
									"type": "object"
								},
								"examples": {
									"Example 1": {
										"value": {
											"message": "Unauthorized request"
										}
									}
								}
							}
						}
					}
				},
				"description": "Verify a Captcha",
				"summary": "Verify a Captcha",
				"tags": [
					"Authentication"
				],
				"security": [],
				"parameters": [],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"properties": {
									"code": {
										"type": "string"
									}
								},
								"required": [
									"code"
								],
								"type": "object"
							}
						}
					}
				}
			}
		},
		"/crud": {
			"get": {
				"operationId": "FindAllitems",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"items": {
										"allOf": [
											{
												"$ref": "#/components/schemas/Item"
											},
											{
												"properties": {
													"_id": {
														"type": "string"
													}
												},
												"required": [
													"_id"
												],
												"type": "object"
											}
										]
									},
									"type": "array"
								},
								"examples": {
									"Successful Response": {
										"value": [
											{
												"_id": "62f05f918c8a2e1d6608dfd2",
												"name": "Item 4",
												"rng": 0.9992763155631645
											}
										]
									}
								}
							}
						}
					}
				},
				"description": "Get all items",
				"summary": "Get all items",
				"tags": [
					"CRUD"
				],
				"security": [],
				"parameters": []
			},
			"post": {
				"operationId": "CreateItem",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"allOf": [
										{
											"$ref": "#/components/schemas/Item"
										},
										{
											"properties": {
												"_id": {
													"type": "string"
												}
											},
											"required": [
												"_id"
											],
											"type": "object"
										}
									]
								},
								"examples": {
									"Successful Response": {
										"value": {
											"_id": "62f05f918c8a2e1d6608dfd2",
											"name": "Item 4",
											"rng": 0.9992763155631645
										}
									}
								}
							}
						}
					}
				},
				"description": "Create an Item",
				"summary": "Create an Item",
				"tags": [
					"CRUD"
				],
				"security": [],
				"parameters": [],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"properties": {
									"name": {
										"type": "string"
									}
								},
								"required": [
									"name"
								],
								"type": "object"
							}
						}
					}
				}
			}
		},
		"/crud/{itemId}": {
			"get": {
				"operationId": "FindItem",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"allOf": [
										{
											"$ref": "#/components/schemas/Item"
										},
										{
											"properties": {
												"_id": {
													"type": "string"
												}
											},
											"required": [
												"_id"
											],
											"type": "object"
										}
									],
									"nullable": true
								},
								"examples": {
									"Successful Response": {
										"value": {
											"_id": "62f05f918c8a2e1d6608dfd2",
											"name": "Item 4",
											"rng": 0.9992763155631645
										}
									}
								}
							}
						}
					}
				},
				"description": "Get Item by ID",
				"summary": "Get Item By ID",
				"tags": [
					"CRUD"
				],
				"security": [],
				"parameters": [
					{
						"in": "path",
						"name": "itemId",
						"required": true,
						"schema": {
							"$ref": "#/components/schemas/mongoose.Types.ObjectId"
						}
					}
				]
			},
			"put": {
				"operationId": "UpdateItem",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"allOf": [
										{
											"$ref": "#/components/schemas/Item"
										},
										{
											"properties": {
												"_id": {
													"type": "string"
												}
											},
											"required": [
												"_id"
											],
											"type": "object"
										}
									]
								},
								"examples": {
									"Successful Response": {
										"value": {
											"_id": "62f05f918c8a2e1d6608dfd2",
											"name": "Item 4",
											"rng": 0.9992763155631645
										}
									}
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": {
								"schema": {
									"properties": {
										"message": {
											"type": "string"
										}
									},
									"required": [
										"message"
									],
									"type": "object"
								},
								"examples": {
									"Example 1": {
										"value": {
											"message": "Unauthorized request"
										}
									}
								}
							}
						}
					}
				},
				"description": "Update an Item",
				"summary": "Update an Item",
				"tags": [
					"CRUD"
				],
				"security": [
					{
						"jwt": [
							"admin"
						]
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "itemId",
						"required": true,
						"schema": {
							"$ref": "#/components/schemas/mongoose.Types.ObjectId"
						}
					}
				],
				"requestBody": {
					"required": true,
					"content": {
						"application/json": {
							"schema": {
								"properties": {
									"name": {
										"type": "string"
									}
								},
								"required": [
									"name"
								],
								"type": "object"
							}
						}
					}
				}
			},
			"delete": {
				"operationId": "DeleteItem",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"allOf": [
										{
											"$ref": "#/components/schemas/Item"
										},
										{
											"properties": {
												"_id": {
													"type": "string"
												}
											},
											"required": [
												"_id"
											],
											"type": "object"
										}
									]
								},
								"examples": {
									"Successful Response": {
										"value": {
											"_id": "62f05f918c8a2e1d6608dfd2",
											"name": "Item 4",
											"rng": 0.9992763155631645
										}
									}
								}
							}
						}
					},
					"401": {
						"description": "Unauthorized",
						"content": {
							"application/json": {
								"schema": {
									"properties": {
										"message": {
											"type": "string"
										}
									},
									"required": [
										"message"
									],
									"type": "object"
								},
								"examples": {
									"Example 1": {
										"value": {
											"message": "Unauthorized request"
										}
									}
								}
							}
						}
					}
				},
				"description": "Delete an Item",
				"summary": "Delete an Item",
				"tags": [
					"CRUD"
				],
				"security": [
					{
						"jwt": [
							"admin"
						]
					}
				],
				"parameters": [
					{
						"in": "path",
						"name": "itemId",
						"required": true,
						"schema": {
							"$ref": "#/components/schemas/mongoose.Types.ObjectId"
						}
					}
				]
			}
		},
		"/dcl/optional": {
			"get": {
				"operationId": "Optional",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"properties": {
										"metadata": {
											"$ref": "#/components/schemas/Record_string.any_"
										},
										"address": {
											"type": "string"
										}
									},
									"required": [
										"address"
									],
									"type": "object"
								},
								"examples": {
									"Successful Response": {
										"value": {
											"address": "0x12345...",
											"metadata": {
												"origin": "http://127.0.0.1:8000",
												"sceneId": "b64-L1Vz...",
												"parcel": "0,0",
												"tld": "org",
												"network": "mainnet",
												"isGuest": true,
												"realm": {
													"domain": "http://127.0.0.1:8000",
													"layer": "",
													"catalystName": "http://127.0.0.1:8000"
												},
												"signer": "decentraland-kernel-scene"
											}
										}
									}
								}
							}
						}
					},
					"400": {
						"description": "Bad Request",
						"content": {
							"application/json": {
								"schema": {
									"properties": {
										"message": {
											"type": "string"
										},
										"ok": {
											"type": "boolean"
										}
									},
									"required": [
										"message",
										"ok"
									],
									"type": "object"
								},
								"examples": {
									"Example 1": {
										"value": {
											"ok": false,
											"message": "Invalid Auth Chain"
										}
									}
								}
							}
						}
					}
				},
				"description": "Optional DCL route",
				"summary": "Optional DCL Route",
				"tags": [
					"Decentraland"
				],
				"security": [],
				"parameters": []
			}
		},
		"/dcl/required": {
			"get": {
				"operationId": "Required",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"properties": {
										"metadata": {
											"$ref": "#/components/schemas/Metadata"
										},
										"address": {
											"type": "string"
										}
									},
									"required": [
										"metadata",
										"address"
									],
									"type": "object"
								},
								"examples": {
									"Successful Response": {
										"value": {
											"address": "0x12345...",
											"metadata": {
												"origin": "http://127.0.0.1:8000",
												"sceneId": "b64-L1Vz...",
												"parcel": "0,0",
												"tld": "org",
												"network": "mainnet",
												"isGuest": true,
												"realm": {
													"domain": "http://127.0.0.1:8000",
													"layer": "",
													"catalystName": "http://127.0.0.1:8000"
												},
												"signer": "decentraland-kernel-scene"
											}
										}
									}
								}
							}
						}
					},
					"400": {
						"description": "Bad Request",
						"content": {
							"application/json": {
								"schema": {
									"properties": {
										"message": {
											"type": "string"
										},
										"ok": {
											"type": "boolean"
										}
									},
									"required": [
										"message",
										"ok"
									],
									"type": "object"
								},
								"examples": {
									"Example 1": {
										"value": {
											"ok": false,
											"message": "Invalid Auth Chain"
										}
									}
								}
							}
						}
					}
				},
				"description": "Required DCL Route",
				"summary": "Required DCL Route",
				"tags": [
					"Decentraland"
				],
				"security": [],
				"parameters": []
			}
		},
		"/tests": {
			"get": {
				"operationId": "CheckIfOnline",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"properties": {
										"online": {
											"type": "boolean"
										}
									},
									"required": [
										"online"
									],
									"type": "object"
								},
								"examples": {
									"Successful Response": {
										"value": {
											"online": true
										}
									}
								}
							}
						}
					}
				},
				"description": "Check if API is online",
				"summary": "Check if API is online",
				"tags": [
					"Tests"
				],
				"security": [],
				"parameters": []
			}
		},
		"/tests/add-items": {
			"get": {
				"operationId": "AddItems",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"properties": {
										"message": {
											"type": "string"
										}
									},
									"required": [
										"message"
									],
									"type": "object"
								},
								"examples": {
									"Successful Response": {
										"value": {
											"message": "Added 10 test items to database"
										}
									}
								}
							}
						}
					}
				},
				"description": "Add 10 test items to DB",
				"summary": "Add 10 test items to DB",
				"tags": [
					"Tests"
				],
				"security": [],
				"parameters": []
			}
		},
		"/tests/rate-limiter": {
			"get": {
				"operationId": "RateLimiter",
				"responses": {
					"200": {
						"description": "Ok",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/RateLimitResponse"
								},
								"examples": {
									"Successful Response": {
										"value": {
											"ok": true,
											"message": "This request is allowed!",
											"requests": 1,
											"ttl": 10
										}
									}
								}
							}
						}
					},
					"503": {
						"description": "Service Unavailable",
						"content": {
							"application/json": {
								"schema": {
									"$ref": "#/components/schemas/RateLimitResponse"
								},
								"examples": {
									"Example 1": {
										"value": {
											"ok": false,
											"message": "You are being rate limited! Slow down",
											"requests": 2,
											"ttl": 9
										}
									}
								}
							}
						}
					}
				},
				"description": "Test Rate Limitter",
				"summary": "Test Rate Limitter",
				"tags": [
					"Tests"
				],
				"security": [],
				"parameters": []
			}
		}
	},
	"servers": [
		{
			"url": "/v2"
		}
	],
	"tags": [
		{
			"name": "Authentication",
			"description": "Authenticate using Sign in With Ethereum (SIWE) [Connect Wallet](./../auth)"
		},
		{
			"name": "CRUD",
			"description": "A set of example CRUD routes"
		},
		{
			"name": "Tests",
			"description": "Test if the API is up and running"
		},
		{
			"name": "Decentraland",
			"description": "Example routes enforcing DCL middleware"
		}
	]
}